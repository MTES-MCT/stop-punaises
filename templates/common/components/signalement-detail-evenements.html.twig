<div class="fr-mt-5w">
    <h3>Détails des événements</h3>
</div>

<dialog aria-labelledby="fr-modal-title-modal-probleme-resolu" role="dialog" id="fr-modal-probleme-resolu" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button class="fr-link--close fr-link" title="Fermer la fenêtre modale" aria-controls="fr-modal-probleme-resolu" type="button">Fermer</button>
                    </div>
                    <div class="fr-modal__content">
                        <h1 id="fr-modal-title-modal-probleme-resolu" class="fr-modal__title">Votre problème est-il résolu ?</h1>
                        <p>
                            Vous avez reçu le protocole d'auto-traitement à domicile le {{ signalement.createdAt.format('d/m/Y') }}.
                        </p>
                        <p>
                            A-t-il fonctionné ? Votre problème est-il résolu ?
                        </p>
                        <div>
                            <form action="{{ path('app_signalement_resolve', {'uuid': signalement.uuid }) }}" method="POST" class="fr-mb-3v">
                                <input type="hidden" name="_csrf_token" value="{{ csrf_token('signalement_resolve') }}">
                                <button class="fr-btn fr-btn--sm fr-btn--icon-left fr-icon-check-line color-check">Mon problème est résolu</button>
                            </form>

                            <button class="fr-btn fr-btn--sm fr-btn--icon-left fr-icon-close-line color-close" data-fr-opened="false" aria-controls="fr-modal-toujours-punaises">J'ai toujours des punaises</button>
                        </div>
                        <p class="align-center fr-mt-3v">
                            <a class="fr-link--close" aria-controls="fr-modal-probleme-resolu" href="#">&lt; Retour</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>

<dialog aria-labelledby="fr-modal-title-modal-toujours-punaises" role="dialog" id="fr-modal-toujours-punaises" class="fr-modal">
    <div class="fr-container fr-container--fluid fr-container-md">
        <div class="fr-grid-row fr-grid-row--center">
            <div class="fr-col-12 fr-col-md-8 fr-col-lg-6">
                <div class="fr-modal__body">
                    <div class="fr-modal__header">
                        <button class="fr-link--close fr-link" title="Fermer la fenêtre modale" aria-controls="fr-modal-toujours-punaises" type="button">Fermer</button>
                    </div>
                    <div class="fr-modal__content">
                        <h1 id="fr-modal-title-modal-toujours-punaises" class="fr-modal__title">Vous avez toujours un problème de punaises</h1>
                        <p>
                            Vous avez indiqué avoir toujours un problème de punaises de lit.
                            <br>
                            Nous pouvons vous aider à trouver une entreprise labellisée pour traiter votre logement.
                        </p>
                        <p>
                            Que souhaitez-vous faire ?
                        </p>
                        <div>
                            <form action="{{ path('app_signalement_switch_pro', {'uuid': signalement.uuid }) }}" method="POST" class="fr-mb-3v">
                                <input type="hidden" name="_csrf_token" value="{{ csrf_token('signalement_switch_pro') }}">
                                <button class="fr-btn fr-btn--sm fr-btn--icon-left fr-icon-check-line color-check">Trouver une entreprise</button>
                            </form>

                            <form action="{{ path('app_signalement_stop', {'uuid': signalement.uuid }) }}" method="POST" class="fr-mb-3v">
                                <input type="hidden" name="_csrf_token" value="{{ csrf_token('signalement_stop') }}">
                                <button class="fr-btn fr-btn--sm fr-btn--icon-left fr-icon-close-line color-close">Arrêter la procédure</button>
                            </form>
                        </div>
                        <p class="align-center fr-mt-3v">
                            <a class="fr-link--close" aria-controls="fr-modal-toujours-punaises" href="#">&lt; Retour</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dialog>

{% for event in events %}
    <div class="event-item fr-mb-3w fr-pb-3w">
        <div class="even-item-date">{{ event.date.format('d/m/Y') }}</div>
        {% if event.label is defined %}
            <div><p class="fr-badge fr-badge--warning fr-badge--no-icon">{{ event.label }}</p></div>
        {% endif %}
        <h4>{{ event.title }}</h4>
        <div>{{ event.description }}</div>
        {% if event.actionLink is defined %}
            <div class="event-item-action fr-mt-3v">
                <a href="{{ event.actionLink }}" target="_blank">{{ event.actionLabel }}</a>
            </div>
        {% endif %}
        {% if event.modalToOpen is defined %}
            <div class="event-item-action fr-mt-3v">
                <a href="#" class="info" data-fr-opened="false" aria-controls="fr-modal-{{ event.modalToOpen }}">{{ event.actionLabel }}</a>
            </div>
        {% endif %}
    </div>
{% endfor %}